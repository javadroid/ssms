<!-- Criminal record management -->
<div class="criminal_mgt">
  <div class="search_container">
    <div class="top_nav d-flex align-items-center">
      <ng-container *ngIf="createModal === false">
        <!-- <div (click)="createModal = true" class="btn btn-success">
          Create profile
        </div> -->
        <div (click)="createNew()" class="btn btn-success">
          Create profile
        </div>
      </ng-container>
      <ng-container *ngIf="createModal === true">
        <!-- <div (click)="createModal = false" class="btn btn-danger">Back</div> -->
        <div (click)="cancelCreate()" class="btn btn-danger">Cancel Create profile </div>
      </ng-container>

      <div class="search_container d-flex">
        <input
          class="form-control me-2"
          type="search"
          placeholder="Search"
          aria-label="Search"
          #item
        />
        <button class="btn btn-outline-success" type="submit" (click)="searchItem(item.value)">Search</button>
      </div>
    </div>
<br>
<br>
<br>
<div class="suspect_list" *ngIf="!edits">
  <div class="suspect" *ngFor="let item of filteredCriminalData; let i = index">
    <img [src]="item.image" alt="" class="sus_img" />
    <p class="name">{{ item.firstName + ' ' + item.lastName }}</p>
    <p class="crime"><span>Murder, Fraud, Arson</span></p>
    <div>
      <button (click)="$event.stopPropagation()" class="btn p-0" (click)="showmenu(i)">
        <img src="../assets/more_vert_black_24dp.svg" alt="" />
      </button>
      <div (click)="$event.stopPropagation()"  class="actions" *ngIf="selectindex === i && showfiltercriteria">
        <button class="btn" (click)="Edit(item)">Edit</button>
      </div>
      <div (click)="$event.stopPropagation()"  class="actions" *ngIf="selectindex === i && showfiltercriteria">
        <button class="btn " (click)="onDelete(item)">Delete!</button>
      </div>
      <div (click)="$event.stopPropagation()"  class="actions" *ngIf="selectindex === i && showfiltercriteria">
        <button class="btn" (click)="onView(item)">View Record</button>
      </div>
    </div>
  </div>
  
</div>
    <div class="table-responsive d-none">
      <table class="table">
        <thead class="table-dark">
          <tr>
            <th scope="col">#</th>
            <th scope="col">Name of Cirminal</th>
            <th scope="col">Phone Number</th>
            <th scope="col">Date Of Birth</th>
            <th scope="col">Place Of Birth</th>
            <th scope="col">State of Origin</th>
            <th scope="col">Occupation</th>
            <th scope="col">Education</th>
            <th scope="col">Height</th>
            <th scope="col">NIN</th>
            <th scope="col"></th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of filteredCriminalData; let i = index">
            <th scope="row">{{ i + 1 }}</th>
            <td>{{ item.firstName + ' ' + item.lastName }}</td>
            <td>{{ item.phone }}</td>
            <td>{{ item.dateOfBirth }}</td>
            <td>{{ item.birthPlace }}</td>
            <td>{{ item.stateOfOrigin }}</td>
            <td>{{ item.occupation }}</td>
            <td>{{ item.education }}</td>
            <td>{{ item.height }}</td>
            <td>{{ item.nin }}</td>
            <td>
              <button (click)="$event.stopPropagation()" class="btn p-0" (click)="showmenu(i)">
                <img src="../assets/more_vert_black_24dp.svg" alt="" />
              </button>
              <div (click)="$event.stopPropagation()"  class="actions" *ngIf="selectindex === i && showfiltercriteria">
                <button class="btn" (click)="Edit(item)">Edit</button>
              </div>
              <div (click)="$event.stopPropagation()"  class="actions" *ngIf="selectindex === i && showfiltercriteria">
                <button class="btn " (click)="onDelete(item)">Delete!</button>
              </div>
              <div (click)="$event.stopPropagation()"  class="actions" *ngIf="selectindex === i && showfiltercriteria">
                <button class="btn" (click)="onView(item)">View Record</button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- VIEW CRIMINAL PROFILE AFTER SEARCH ============== VIEW CRIMINAL PROFILE AFTER SEARCH========= VIEW CRIMINAL PROFILE AFTER SEARCH -->

    <div *ngIf="criminal_profile" class="criminal_profile">
      <div class="first_row">
        <div class="user_img-container">
          <img src="{{ criminalRecord.image }}" alt="" />
        </div>

        <!-- SEARCH RESULT ================= SEARCH RESULT -->
        <div class="criminal_info">
          <i class="ti-close" style="color: red; cursor: pointer;" (click)="closeCriminal()"><strong> X </strong></i>
          <div class="user_primary-info">
            <div class="user_info-container">
              <p class="info_label">First name</p>
              <p class="data">{{ criminalRecord.firstName }}</p>
            </div>
            <div class="user_info-container">
              <p class="info_label">Middle name</p>
              <p class="data">{{ criminalRecord.lastName }}</p>
            </div>
            <div class="user_info-container">
              <p class="info_label">Last name</p>
              <p class="data">{{ criminalRecord.middleName }}</p>
            </div>
            <div class="user_info-container">
              <p class="info_label">Alias</p>
              <p class="data">{{ criminalRecord.alias }}</p>
            </div>
            <div class="user_info-container">
              <p class="info_label">Gender</p>
              <p class="data">{{ criminalRecord.gender }}</p>
            </div>
            <div class="user_info-container">
              <p class="info_label">Date of Birth</p>
              <p class="data">{{ criminalRecord.dateOfBirth }}</p>
            </div>
            <div class="user_info-container">
              <p class="info_label">Place of Birth</p>
              <p class="data">{{criminalRecord.birthPlace}}</p>
            </div>
            <div class="user_info-container">
              <p class="info_label">State</p>
              <p class="data">{{ criminalRecord.stateOfOrigin }}</p>
            </div>
            <div class="user_info-container">
              <p class="info_label">L.G.A</p>
              <p class="data">{{ criminalRecord.lgaOfOrigin }}</p>
            </div>
            <div class="user_info-container">
              <p class="info_label">Occupation</p>
              <p class="data">{{ criminalRecord.occupation }}</p>
            </div>
            <div class="user_info-container">
              <p class="info_label">Location</p>
              <p class="data">
                {{ criminalRecord.address }} ,{{ criminalRecord.lga }}, {{
                  criminalRecord.state
                }}
              </p>
            </div>
            <div class="user_info-container">
              <p class="info_label">Education</p>
              <p class="data">{{ criminalRecord.education }}</p>
            </div>
            <div class="user_info-container">
              <p class="info_label">NIN</p>
              <p class="data">{{ criminalRecord.nin }}</p>
            </div>
            <div class="user_info-container">
              <p class="info_label">Eye Color</p>
              <p class="data">{{criminalRecord.eyeColor}}</p>
            </div>
            <div class="user_info-container">
              <p class="info_label">Hair Color</p>
              <p class="data">{{criminalRecord.hairColor}}</p>
            </div>
            <div class="user_info-container">
              <p class="info_label">Height</p>
              <p class="data">{{ criminalRecord.height }}</p>
            </div>
            <div class="user_info-container">
              <p class="info_label">Weight</p>
              <p class="data">{{criminalRecord.weight}}</p>
            </div>
            <div class="user_info-container">
              <p class="info_label">Phone number</p>
              <p class="data">{{ criminalRecord.phone }}</p>
            </div>
            <div class="user_info-container">
              <p class="info_label">Email</p>
              <p class="data">{{ criminalRecord.email }}</p>
            </div>
            <div class="user_info-container">
              <p class="info_label">Country</p>
              <p class="data">{{ criminalRecord.countryOfOrigin }}</p>
            </div>
          </div>

          <div class="title-container">
            <h2 class="section_title">Criminal Record <span>{{crimeData.length}}</span></h2>

            <button disabled class="create_record btn btn-success">Create record</button>
          </div>

          <div *ngFor="let item of crimeData" class="case_list">
            <div [ngClass]="item.status==='closed'? 'closed':'active'" class="case d-flex ">
              <span class="crime">{{item.crimeType}}</span>
              <p class="crime_info">Offense date: <span>10/10/2022</span></p>
              <p class="crime_info">Offense Time: <span>10:15 PM</span></p>
              <p class="status">{{item.status}}</p>
              <button (click)="viewDetail(item)" class="see_detail">See detail</button>
            </div>
            <div class="case d-flex  ">
              <span class="crime">Cyber Crime</span>
              <p class="crime_info">Offense date: <span>10/10/2022</span></p>
              <p class="crime_info">Offense Time: <span>10:15 PM</span></p>
              <p class="status">Active</p>
              <button class="see_detail">See detail</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- VIEW CASE DETAIL MODAL=============VIEW CASE DETAIL MODAL -->

    <div class="case_modal " *ngIf="case_modal">
      <div class="case_card">
        <button
        (click)="case_modal=false"
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
        <div class="section">
          <h1 class="crime_type">{{oneCrime.crimeType}} <span class="status">{{oneCrime.status}}</span></h1>
          <div class="sub_info d-flex">
            <p class="crime_info">Offense date: <span>10/10/2022</span></p>
            <p class="crime_info">Offense Time: <span>10:15 PM</span></p>
            <p class="crime_info">Last Updated: <span>10/10/2022</span></p>
            <p class="crime_info">Closed on: <span>20/12/2022</span></p>
            <p class="crime_info">
              Officer Assigned: <span>{{oneCrime.personnelId}}</span>
            </p>
          </div>
          <p class="statement">
            Statement:
            <span class="d-block"
              >Lorem ipsum dolor sit amet consectetur, adipisicing elit.
              Expedita porro quasi saepe minima debitis perspiciatis quaerat
              commodi veritatis blanditiis? Illo quas dolorum assumenda impedit
              libero odio veniam, magnam facere cum nisi distinctio deleniti
              nam! Non quidem dignissimos aspernatur eaque atque magni? Dolorem
              itaque esse commodi eos cum mollitia praesentium. Officia,
              voluptates quisquam fuga laborum ab, inventore fugit nesciunt at
              et quasi excepturi quo alias voluptatum delectus aut. Veniam sit
              voluptatum veritatis vero cumque sapiente quasi ut at voluptatem,
              libero placeat illo impedit explicabo ullam doloribus quas magnam
              perspiciatis numquam doloremque beatae maiores ratione molestias
              praesentium. Totam in consequuntur labore veritatis,
              necessitatibus numquam, rerum velit dicta beatae nam aliquid
              blanditiis perferendis unde perspiciatis dolore libero eum, autem
              recusandae fuga obcaecati harum magni? Voluptatibus deserunt
              veritatis corrupti voluptatem, eaque labore nulla eligendi
              repellat molestiae explicabo veniam excepturi repellendus delectus
              accusamus quis, sit porro ratione inventore odit dignissimos
              dolorem doloribus! Dicta praesentium quas vero deserunt ea?
              Similique perferendis doloremque eius distinctio magnam, assumenda
              fugit nihil qui odio voluptate voluptatum ipsam amet. Aperiam est
              rem in tempore impedit pariatur reprehenderit nemo repudiandae
              cupiditate. Numquam minus quaerat deserunt qui repellendus
              repudiandae. Architecto ea, possimus ullam natus aliquam eaque
              culpa fugiat, accusantium, aspernatur distinctio exercitationem
              corporis.</span
            >
          </p>
        </div>

        <div class="section">
          <h4 class="section_title">Suspect and Accomplice(s)</h4>

          <div class="suspect_list">
            <div class="suspect">
              <img src="images/3. Black Man.png" alt="" class="sus_img" />
              <p class="name">John Doe (Gunman)</p>
            </div>
            <div class="suspect">
              <img src="images/3. Black Man.png" alt="" class="sus_img" />
              <p class="name">John Doe (Gunman)</p>
            </div>
            <div class="suspect">
              <img src="images/3. Black Man.png" alt="" class="sus_img" />
              <p class="name">John Doe (Gunman)</p>
            </div>
            <div class="suspect">
              <img src="images/3. Black Man.png" alt="" class="sus_img" />
              <p class="name">John Doe (Gunman)</p>
            </div>
          </div>
        </div>

        <div class="section">
          <h4 class="section_title">Victim(s)</h4>

          <div class="suspect_list">
            <div class="suspect">
              <img src="images/3. Black Man.png" alt="" class="sus_img" />
              <p class="name">John Doe</p>
            </div>
            <div class="suspect">
              <img src="images/3. Black Man.png" alt="" class="sus_img" />
              <p class="name">John Doe</p>
            </div>
          </div>
        </div>
        <div class="section">
          <h4 class="section_title">Vehicle</h4>

          <div class="vehicle_list">
            <div class="vehicle">
              <p class="vehicle_info">Dodge Challenger R/T 2011 (Black)</p>
              <p class="vehicle_info">Number Plate <span>LAG-20128</span></p>
            </div>
          </div>
        </div>
        <div class="section">
          <h4 class="section_title">Weapon</h4>

          <div class="vehicle_list">
            <div class="vehicle">
              <p class="vehicle_info">Dodge Challenger R/T 2011 (Black)</p>
              <p class="vehicle_info">Number Plate <span>LAG-20128</span></p>
            </div>
          </div>
        </div>
        <div class="section">
          <h4 class="section_title">Vehicle</h4>

          <div class="vehicle_list">
            <div class="vehicle">
              <p class="vehicle_info">Glock 17 Gen4 (Pistol)</p>
            </div>
          </div>
        </div>
        <div class="section">
          <h4 class="section_title">Evidence Recovered</h4>

          <div class="vehicle_list">
            <div class="vehicle">
              <p class="vehicle_info">
                <span class="d-block">Glock 17 Gen4 (Pistol)</span>
                <span class="d-block">Boots covered in petrol</span>
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- CREATE CRIMINAL PROFILE ===============CREATE CRIMINAL PROFILE -->
  <div *ngIf="createModal && edits" class="main_reg">
    <div class="stepper-container">
      <div class="step_count d-flex align-items-center">
        <a
          [ngClass]="{ active: stepper === 0 }"
          (click)="stepper = 0"
          class="btn step_btn"
          ><span>1</span>Primary information</a
        >
        <a
          [ngClass]="{ active: stepper === 1 }"
          (click)="stepper = 1"
          class="btn step_btn"
          ><span>2</span>Contact</a
        >
        <a
          [ngClass]="{ active: stepper === 2 }"
          (click)="stepper = 2"
          class="btn step_btn"
          ><span>3</span>Physical Features</a
        >
      </div>
    </div>
    <form [formGroup]="criminalInfoForm" action="">
      <!-- Primary info starts here -->
      <div *ngIf="stepper === 0" class="primary_info">
        <div class="d-flex w-100 justify-content-between name_container">
          <div class="input_container mb-3">
            <label for="" class="d-block">First name</label>
            <input
              formControlName="firstName"
              type="text"
              class="form-control"
              placeholder="First name"
            />
          </div>
          <div class="input_container mb-3">
            <label for="" class="d-block">Last name</label>
            <input
              formControlName="lastName"
              type="text"
              class="form-control"
              placeholder="Last name"
            />
          </div>
          <div class="input_container mb-3">
            <label for="" class="d-block">Middle name</label>
            <input
              formControlName="middleName"
              type="text"
              class="form-control"
              placeholder="Middle name"
            />
          </div>
          <div class="input_container mb-3">
            <label for="" class="d-block">Alias</label>
            <input
              formControlName="alias"
              type="text"
              class="form-control"
              placeholder="Alias"
            />
          </div>
        </div>

        <div class="input_container mb-3">
          <label for="" class="d-block">Date of Birth</label>
          <input
            formControlName="dateOfBirth"
            type="date"
            class="form-control"
            placeholder="Date of Birth"
          />
        </div>

        <div class="input_container mb-3">
          <label for="" class="d-block">Place of Birth</label>
          <input
            formControlName="birthPlace"
            type="text"
            class="form-control"
            placeholder="Place of Birth"
          />
        </div>

        <div class="d-flex w-100 justify-content-between occupation">
          <div class="input_container mb-3">
            <label for="" class="d-block">Country</label>
            <select
              formControlName="countryOfOrigin" #data (change)="selectedCountry(data.value)"
              name=""
              id=""
              class="form-control selected"
            >
              <option [defaultSelected]="'Nigeria'" value="">Select</option>
              <option *ngFor="let data of allCountries" [value]="data">{{data}}</option>
              <!-- <option value="">Nigeria</option> -->
            </select>
          </div>
          
          <div class="input_container mb-3">
            <label for="" class="d-block">State of Origin</label>
            <select
            formControlName="stateOfOrigin" #state (change)="getOriginLga(state.value)"
              name=""
              id=""
              class="form-control selected"
            >
              <option value="">Select</option>
              <option *ngFor="let data of allState" [value]="data">{{data}}</option>
            </select>
          </div>

          <div class="input_container mb-3">
            <label for="" class="d-block">LGA of Origin</label>
            <select
              formControlName="lgaOfOrigin"
              name=""
              id=""
              class="form-control selected"
            >
              <option value="">Select</option>
              <option *ngFor="let data of filteredStateOrigin" [value]="data">{{data}}</option>
            </select>
          </div>
         
        </div>

        <div class="d-flex origin">
          <div class="input_container mb-3">
            <label for="" class="d-block">Occupation</label>
            <input
              formControlName="occupation"
              type="text"
              class="form-control"
              placeholder="Occupation"
            />
          </div>

          <div class="input_container mb-3">
            <label for="" class="d-block">Highest Education</label>
            <input
              formControlName="education"
              type="text"
              class="form-control"
              placeholder="Highest Education"
            />
          </div>
        </div>

        <a (click)="stepper = stepper + 1" class="btn btn-success">Next</a>
      </div>

      <!-- step 2 (contact information) -->

      <div *ngIf="stepper === 1" class="contact_information">
        <div class="input_container mb-3">
          <label for="" class="d-block">NIN</label>
          <input
            formControlName="nin"
            type="text"
            class="form-control"
            placeholder="NIN"
          />
        </div>
        <div class="input_container mb-3">
          <label for="" class="d-block">Email</label>
          <input
            formControlName="email"
            type="email"
            class="form-control"
            placeholder=" Email"
          />
        </div>
        <div class="input_container mb-3">
          <label for="" class="d-block">Phone number</label>
          <input
            formControlName="phone"
            type="tel"
            class="form-control"
            placeholder="Phone number"
          />
        </div>
        <div class="input_container mb-3">
          <label for="" class="d-block">Address</label>
          <input
            formControlName="address"
            type="text"
            class="form-control"
            placeholder=" Address"
          />
        </div>
        <div class="input_container mb-3">
          <label for="" class="d-block">State</label>
          <select
          formControlName="state" #lga (change)="getLga(lga.value)"
            name=""
            id=""
            class="form-control selected"
          >
            <option value="">Select</option>
            <option *ngFor="let data of allState" [value]="data">{{data}}</option>
          </select>
        </div>

        <div class="input_container mb-3">
          <label for="" class="d-block">LGA</label>
          <select
            formControlName="lga"
            name=""
            id=""
            class="form-control selected"
          >
            <option value="">Select</option>
            <option *ngFor="let data of filteredState" [value]="data">{{data}}</option>
          </select>
        </div>
        
        <a (click)="stepper = stepper - 1" class="btn border-success"
          >Previous</a
        >
        <a (click)="stepper = stepper + 1" class="btn btn-success">Next</a>
      </div>

      <!-- step 3 (Physical Attribute) -->

      <div *ngIf="stepper === 2" class="contact_information">
        <div class="input_container mb-3">
          <label for="" class="d-block">Gender</label>
          <select
          formControlName="gender"
          name=""
          id=""
          class="form-control selected"
        >
          <option value="">Select</option>
          <option value="Male">Male</option>
          <option value="Female">Female</option>
        </select>
        </div>
        <div class="input_container mb-3">
          <label for="" class="d-block">Hair Color</label>
          <input
            formControlName="hairColor"
            type="color"
            class="form-control"
            placeholder="Hair Color"
          />
        </div>
        <div class="input_container mb-3">
          <label for="" class="d-block">Eye Color</label>
          <input
            formControlName="eyeColor"
            type="color"
            class="form-control"
            placeholder="Eye Color"
          />
        </div>
        <div class="input_container mb-3">
          <label for="" class="d-block">Height</label>
          <input
            formControlName="height"
            type="text"
            class="form-control"
            placeholder="Height"
          />
        </div>
        <div class="input_container mb-3">
          <label for="" class="d-block">Weight</label>
          <input
            formControlName="weight"
            type="text"
            class="form-control"
            placeholder="Weight"
          />
        </div>
        <div class="input_container mb-3">
          <label for="" class="d-block">Photo capture</label>
          <input
            (formdata)="(fileData)"
            (change)="upload($event)"
            type="file"
            class="form-control"
            placeholder="Photo capture"
          />
          <img
            [src]="criminalImg"
            *ngIf="criminalImg"
            height="200"
            class="passport"
          />
        </div>

        <!-- <a (click)="stepper = stepper - 1" class="btn border-success"
          >Previous</a
        > -->
        <a (click)="Backward()" class="btn border-success"
          >Previous</a
        >
        <!-- <a (click)="onCreate()" class="btn btn-success">Submit</a> -->
        <a (click)="saveCriminalInfoForm()" class="btn btn-success">Submit</a>
      </div>
    </form>
  </div>
</div>
