<main class="main_dashboard d-none">
  <div class="top_nav d-flex align-items-center">
    <h3 class="user">NIGERIAN POLICE FORCE</h3>
    <div class="search_container d-flex">
      <input
        class="form-control me-2"
        type="search"
        placeholder="Search"
        aria-label="Search"
      />
      <button class="btn btn-outline-success" type="submit">Search</button>
    </div>
  </div>

  <div class="stat_container">
    <div class="stat_card">
      <p class="stat_title">Total personnel</p>
      <div class="digit">20.3K</div>
    </div>
    <div class="stat_card">
      <p class="stat_title">Registered Districts</p>
      <div class="digit">20.3K</div>
    </div>
    <div class="stat_card">
      <p class="stat_title">Total personnel</p>
      <div class="digit">20.3K</div>
    </div>
    <div class="stat_card">
      <p class="stat_title">Total personnel</p>
      <div class="digit">20.3K</div>
    </div>

    <button class="btn border-success">Edit Account</button>
  </div>
</main>

<!-- PERSONNEL MANAGEMENT BEGINS HERE -->

<div (click)="onCloseMenu()" class="personnel_management">
  <!-- PERSONNEL LIST BEGINS HERE===========PERSONNEL LIST BEGINS HERE -->

  <div class="personnel_list-container">
    <div class="filter_section">
      <button class="btn btn-secondary" (click)="showFilterList()">
        <img src="images/filter_list_white_24dp.svg" alt="" />Filter list
      </button>

      <div class="filter_container" *ngIf="showFilter">
        <div class="input_container mb-3">
          <label for="" class="d-block">Select state</label>
          <select name="" id="">
            <option>Select option</option>
          </select>
        </div>
        <div class="input_container mb-3">
          <label for="" class="d-block">Select district</label>
          <select name="" id="">
            <option>Select option</option>
          </select>
        </div>
        <button class="btn btn-primary">Filter</button>
      </div>

      <button
        class="btn btn-success m-lg-2"
        *ngIf="firstShow"
        (click)="createNew()"
      >
        Create Personnel
      </button>
      <button
        *ngIf="showSecond"
        style="float: right"
        (click)="Backward()"
        class="sign_in-btn btn btn-success"
      >
        Back
      </button>
      <button
        *ngIf="showViewDetails"
        style="float: right"
        (click)="Backward()"
        class="sign_in-btn btn btn-success"
      >
        Back
      </button>
    </div>
    <div class="table-responsive" *ngIf="firstShow">
      <table class="table">
        <thead class="table-dark">
          <tr>
            <th scope="col">#</th>
            <th scope="col">Staff Ref Number</th>
            <th scope="col">First name</th>
            <th scope="col">Middle name</th>
            <th scope="col">Last name</th>
            <th scope="col">Email</th>
            <th scope="col">Phone Number</th>

            <th scope="col">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of PersonnelDetail; let i = index">
            <th scope="row">{{ i + 1 }}</th>
            <td>{{ item.refNunmber }}</td>
            <td>{{ item.firstname }}</td>
            <td>{{ item.middlename }}</td>
            <td>{{ item.lastname }}</td>
            <td>{{ item.email }}</td>
            <td>{{ item.phone }}</td>
            <td>
              <button
                (click)="$event.stopPropagation()"
                class="btn p-0"
                (click)="showmenu(i)"
              >
                <img src="../assets/more_vert_black_24dp.svg" alt="" />
              </button>

              <div
                (click)="$event.stopPropagation()"
                class="actions"
                *ngIf="selectindex === i && showfiltercriteria"
              >
                <button id="" class="btn" (click)="View(item)">View</button>
                <button class="btn" (click)="Edit(item)">Edit</button>
                <button class="btn" (click)="SendPassword(item)">
                  Send Password
                </button>
                <button class="btn" (click)="onDelete(item)">Delete!</button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- PERSONNEL CREATION BEGINS HERE===========PERSONNEL CREATION BEGINS HERE -->

  <div class="personnel_reg-form d-flex" *ngIf="showSecond">
    <div class="stepper-container">
      <div class="step_count d-flex align-items-center">
        <button
          class="btn step_btn"
          [ngClass]="step === steps[0] ? 'active' : ''"
          (click)="onNext(steps[0])"
        >
          <span>1</span> Primary information
        </button>
        <button
          class="btn step_btn"
          [ngClass]="step === steps[1] ? 'active' : ''"
          (click)="onNext(steps[1])"
        >
          <span>2</span>Contact Information / Upload
        </button>
      </div>
    </div>
    <div class="form_container">
      <!-- signup_form begins here -->

      <h2 class="form_title">User Creation</h2>

      <form [formGroup]="PersonnelRegisterForm">
        <div class="step_1" *ngIf="!stepperFirstInfo">
          <div class="input_container mb-3">
            <label for="" class="d-block">Rank</label>
            <select   name="" id="" class="form-control">
              <option>Select Rank</option>
              <option *ngFor="let item of rankDetails" [value]="item.rank">{{ item.rank }}</option>
            </select>
          </div>

          <div class="d-flex w-100 justify-content-between name_container">
            <div class="input_container mb-3">
              <label for="" class="d-block">First name</label>
              <input
                formControlName="firstname"
                type="text"
                class="form-control"
                placeholder="First name"
              />
            </div>

            <div class="input_container mb-3">
              <label for="" class="d-block">Middle name</label>
              <input
                formControlName="middlename"
                type="text"
                class="form-control"
                placeholder="Last name"
              />
            </div>
            <div class="input_container mb-3">
              <label for="" class="d-block">Last name</label>
              <input
                formControlName="lastname"
                type="text"
                class="form-control"
                placeholder="Last name"
              />
            </div>
          </div>

          <div
            class="selection-container d-flex align-items-center justify-content-between"
          >
            <div class="input_container mb-3">
              <label for="" class="d-block">State of service</label>
              <select
                name=""
                id=""
                class="form-control"
                #state
                (change)="onStateChange($event.target)"
                formControlName="stateofservice"
              >
                <option>Select State</option>
                <option
                  *ngFor="let state of stateDetails"
                  [value]="state.nameOfState"
                >
                  {{ state.nameOfState }}
                </option>
              </select>
            </div>
            <div class="input_container mb-3">
              <label for="" class="d-block">L.G.A of service</label>
              <select
                name=""
                id=""
                formControlName="lgaofservice"
                class="form-control selected"
              >
                <option *ngFor="let lga of lgaDetails" [value]="lga.lgaName">
                  {{ lga.lgaName }}
                </option>
              </select>
            </div>

            <div class="input_container mb-3">
              <label for="" class="d-block">Country</label>
              <select  name="" id="" class="form-control">
                <option>Select Country</option>
                <option *ngFor="let item of countryDetails"  [value]="item.countryName">{{ item.countryName }}</option>
              </select>
            </div>
          </div>
          <div class="input_container mb-3">
            <label for="" class="d-block">Department</label>
            <select
              name=""
              id=""
              formControlName="department"
              class="form-control"
            >
              <option>Select Department</option>
              <option
                *ngFor="let dept of departmentDetails"
                [value]="dept.departmentName"
              >
                {{ dept.departmentName }}
              </option>
            </select>
          </div>

          <div class="d-flex division justify-content-between">
            <div class="input_container mb-3">
              <label for="" class="d-block">Branch/division</label>
              <select
                name=""
                id=""
                formControlName="divisionhead"
                class="form-control selected"
              >
                <option>Select Division head</option>
                <option
                  *ngFor="let branch of branchDetails"
                  [value]="branch.branchName"
                >
                  {{ branch.branchName }}
                </option>
              </select>
            </div>
            <!-- <div class="input_container mb-3">
                  <label for="" class="d-block">Division head</label>
                  <select name="" id="" class="form-control">
                    <option>Select Division head</option>
                  </select>
                </div> -->


          </div>

          <div
            class="selection-container d-flex align-items-center justify-content-between"
          >
            <div class="input_container mb-3">
              <label for="" class="d-block">Lat</label>
              <input
                formControlName="lat"
                type="text"
                class="form-control"
                placeholder="latitude"
              />
            </div>
            <div class="input_container mb-3">
              <label for="" class="d-block">Long</label>
              <input
                formControlName="long"
                type="text"
                class="form-control"
                placeholder="longitude"
              />
            </div>

            <div class="input_container mb-3">
              <label for="" class="d-block">Open map</label>
              <button (click)="getLocation()" class="btn form-control"></button>
            </div>
          </div>
          <button
            class="sign_in-btn btn btn-success"
            (click)="onNext(steps[1])"
          >
            Next
          </button>
        </div>

        <div class="step_2 contact_info" *ngIf="stepperFirstInfo">
          <div class="input_container mb-3">
            <label for="" class="d-block">Ref number</label>
            <input
              type="text"
              formControlName="refNunmber"
              class="form-control"
            />
          </div>
          <div class="input_container mb-3">
            <label for="" class="d-block">Email</label>
            <input
              type="email"
              class="form-control"
              formControlName="email"
              placeholder="Email"
            />
          </div>
          <div class="input_container mb-3">
            <label for="" class="d-block">Phone number</label>
            <input
              formControlName="phone"
              type="number"
              class="form-control"
              placeholder="Phone number"
            />
          </div>
          <div class="input_container mb-3">
            <label for="" class="d-block">Home Address</label>
            <input
              formControlName="address"
              type="text"
              class="form-control"
              placeholder="home address"
            />
          </div>

          <div class="input_container mb-3">
            <label for="" class="d-block">Image upload</label>
            <input
              (formdata)="(fileData)"
              (change)="upload($event)"
              type="file"
              class="form-control"
            />
            <img
              [src]="personnelImag"
              *ngIf="personnelImag"
              height="200"
              class="passport"
            />
          </div>

          <button
            class="sign_in-btn btn btn-success"
            (click)="SubmitPersonnel()"
          >
            Submit
          </button>
          <button
            class="sign_in-btn btn border-success"
            (click)="onNext(steps[0])"
          >
            Previous
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- VIEW PERSONNEL ============== VIEW PERSONNEL========= VIEW PERSONNEL -->

  <div class="personnel_profile" *ngIf="showViewDetails">
    <div class="first_row">
      <div class="user_img-container">
        <img [src]="personnelImag" alt="" />
      </div>

      <div class="user_primary-info">
        <div class="user_info-container">
          <p class="info_label">First name</p>
          <p class="data">{{ showAllViewDetails.firstname }}</p>
        </div>
        <div class="user_info-container">
          <p class="info_label">Middle name</p>
          <p class="data">{{ showAllViewDetails.middlename }}</p>
        </div>
        <div class="user_info-container">
          <p class="info_label">Last name</p>
          <p class="data">{{ showAllViewDetails.lastname }}</p>
        </div>
        <div class="user_info-container">
          <p class="info_label">Phone number</p>
          <p class="data">{{ showAllViewDetails.phone }}</p>
        </div>
        <div class="user_info-container">
          <p class="info_label">Home address</p>
          <p class="data">{{ showAllViewDetails.address }}</p>
        </div>
        <div class="user_info-container">
          <p class="info_label">State</p>
          <p class="data">Rivers State</p>
        </div>
        <div class="user_info-container">
          <p class="info_label">L.G.A</p>
          <p class="data">Obio Akpor</p>
        </div>
        <div class="user_info-container">
          <p class="info_label">Department</p>
          <p class="data">Forensics</p>
        </div>
        <div class="user_info-container">
          <p class="info_label">Rank</p>
          <p class="data">Detective</p>
        </div>
        <div class="user_info-container">
          <p class="info_label">Supervisor</p>
          <p class="data">Joel Mbakwe Uzor</p>
        </div>
        <div class="user_info-container">
          <p class="info_label">Branch/Division</p>
          <p class="data">Obio Akpor</p>
        </div>
      </div>
    </div>
  </div>
</div>
